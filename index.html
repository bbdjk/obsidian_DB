<script src="db_rule.js"></script>
<script src="db_faq.js"></script>  <script src="db_rdl.js"></script>
<script src="db_un.js"></script>
<script src="db_gof.js"></script>
<script src="db_pd.js"></script>

<script>
    // 1. 데이터 통합 (DATA_FAQ 추가됨)
    const DATABASE = [
        ...(typeof DATA_RULE !== 'undefined' ? DATA_RULE : []),
        ...(typeof DATA_FAQ  !== 'undefined' ? DATA_FAQ  : []), // 여기 추가!
        ...(typeof DATA_RDL  !== 'undefined' ? DATA_RDL  : []),
        ...(typeof DATA_UN   !== 'undefined' ? DATA_UN   : []),
        ...(typeof DATA_GOF  !== 'undefined' ? DATA_GOF  : []),
        ...(typeof DATA_PD   !== 'undefined' ? DATA_PD   : [])
    ];

    // ... (이 아래 내용은 기존과 동일합니다) ...
    const nav = document.getElementById('nav');
    const main = document.getElementById('main');

    function renderNav(list, isSearch = false) {
        nav.innerHTML = '';
        const grouped = {};
        list.forEach(item => {
            if(!grouped[item.cat]) grouped[item.cat] = [];
            grouped[item.cat].push(item);
        });

        for (const [catName, items] of Object.entries(grouped)) {
            const groupDiv = document.createElement('div');
            groupDiv.className = 'cat-group';
            if(isSearch) groupDiv.classList.add('open');

            const header = document.createElement('div');
            header.className = 'cat-header';
            header.innerHTML = `<span>${catName}</span> <span class="arrow">▶</span>`;
            header.onclick = () => groupDiv.classList.toggle('open');

            const listDiv = document.createElement('div');
            listDiv.className = 'nav-list';

            items.forEach(item => {
                const el = document.createElement('div');
                el.className = `nav-item ${item.color || ''}`;
                el.innerText = item.title;
                el.onclick = (e) => {
                    e.stopPropagation();
                    renderDetail(item);
                    document.querySelectorAll('.nav-item').forEach(i=>i.classList.remove('active'));
                    el.classList.add('active');
                };
                listDiv.appendChild(el);
            });
            groupDiv.appendChild(header);
            groupDiv.appendChild(listDiv);
            nav.appendChild(groupDiv);
        }
    }

    function renderDetail(item) {
        let html = `<div class="card">`;
        html += `<div class="header-row">
                    <div class="title-grp">
                        <h1 class="${item.color||''}">${item.title}</h1>
                        <div style="color:#888;">${item.sub || item.cat}</div>
                    </div>
                 </div>`;

        if(item.stats) {
            html += `<div class="stats-grid">`;
            for(let [k,v] of Object.entries(item.stats)) 
                html += `<div class="stat-item"><span style="color:#666;font-size:0.8rem;">${k}</span><div class="stat-val">${v}</div></div>`;
            html += `</div>`;
        }

        if(item.data) { 
            item.data.forEach(d => html += `<div style="margin-bottom:15px; padding:15px; background:#252525; border-radius:8px;"><div style="color:#ffb74d; font-weight:bold; margin-bottom:5px;">Q. ${d.q}</div><div style="color:#ddd; line-height:1.5;">A. ${d.a}</div></div>`);
        } else if(item.details) {
            item.details.forEach(d => html += `<div class="detail-block"><h3>${d.h}</h3><p>${d.t}</p></div>`);
        }
        html += `</div>`;
        main.innerHTML = html;
        if(window.innerWidth <= 768) main.scrollTop = 0;
    }

    document.getElementById('searchInput').addEventListener('input', (e) => {
        const term = e.target.value.toLowerCase();
        if(!term) { renderNav(DATABASE, false); return; }
        const filtered = DATABASE.filter(i => JSON.stringify(i).toLowerCase().includes(term));
        renderNav(filtered, true);
    });

    renderNav(DATABASE);
</script>
</body>
</html>
